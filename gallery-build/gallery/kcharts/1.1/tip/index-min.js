KISSY.add("gallery/kcharts/1.1/tip/index",function(h,l){function k(a){var b={clsName:"ks-chart-default",autoRender:!0,isVisable:!1,boundry:{x:0,y:0,width:0,height:0},rootNode:g("body"),tpl:"",corner:{isShow:!1,tpl:"corner",css:{position:"absolute",marginLeft:0,marginTop:0}},anim:{easing:"easeOut",duration:0.3},offset:{x:0,y:0},alignX:"left",alignY:"top"};this._events={MOVE:"move",SETCONT:"setcontent",HIDE:"hide"};this._cfg=h.mix(b,a,void 0,void 0,!0);this.init()}var g=h.all;h.augment(k,h.Event.Target,
{init:function(){var a=this._cfg;this._data={};this._tpl=a.tpl;this.$tip;this.bindEvent();a.autoRender&&this.render()},bindEvent:function(){var a=this,b=a._cfg.template,d=a._events;a.on(d.MOVE,function(c){var b=c.x,d=c.y,c=c.style;a.isVisable()?a.animateTo(b,d):a.moveTo(b,d);c&&a.$tip.css(c)});a.on(d.SETCONT,function(c){h.isFunction(b)?a.setContent(b(c.data)):a.renderTemplate(b,c.data)});a.on(d.HIDE,function(){a.hide()})},getInstance:function(){return this.$tip},isVisable:function(){return"none"==
this.$tip.css("display")?!1:!0},show:function(){this.$tip&&this.$tip.show();return this},hide:function(){this.$tip&&this.$tip.stop()&&this.$tip.hide();return this},moveTo:function(a,b){this.show();var d=this.getInstance(),c=this._cfg,e=this.getPos(a,b),c=c.corner.css["margin-left"]||c.corner.css.marginLeft||0,f=this.$corner;f&&f.css({"margin-left":c+a-e.x});d.css({"margin-top":e.y,"margin-left":e.x})},animateTo:function(a,b,d){this.show();var c=this.getInstance(),e=this._cfg,f=e.anim,b=this.getPos(a,
b),e=e.corner.css["margin-left"]||e.corner.css.marginLeft||0,i=this.$corner;i&&i.css({"margin-left":e+a-b.x});c.stop().animate({"margin-top":b.y,"margin-left":b.x},f.duration,f.easing,function(){d&&d()})},renderTemplate:function(a,b){return this.setContent(l(a).render(b))},setContent:function(a){return g("."+this._cfg.clsName+"-tip-content",this.$tip).html(a)},getPos:function(a,b){var d=this._cfg,c=d.offset,e=b+c.y,f=a+c.x,i=d.alignX,h=d.alignY,j=this.getInstance(),g=j.outerWidth(),j=j.outerHeight(),
d=d.boundry;switch(i){case "center":f=Math.round(a)+c.x-g/2;break;case "right":f=Math.round(a)+c.x-g}switch(h){case "middle":e=Math.round(b)+c.y-j/2;break;case "bottom":e=Math.round(b)+c.y-j}d.width&&d.height&&(a=d.x||0,b=d.y||0,c=d.width,i=d.height,e=e<b?b:e,e=e>b+i?b+i:e,f=f<a?a:f,f=f+g>a+c?a+c-g:f);return{x:f,y:e}},_isExist:function(){return this.$tip&&this.$tip[0]},render:function(){var a=this._cfg,b=this._tpl,d=this._data,c=a.isVisable?"inline-block":"none",e=a.rootNode.offset();if(a.rootNode.offset())return this.$tip=
!this._isExist()&&g('<span class="'+a.clsName+'-tip" style="*zoom:1;"><span class="'+a.clsName+'-tip-content"></span></span>').css({display:c}).appendTo(a.rootNode),this.$corner=a.corner.isShow&&a.corner.tpl?g("<div class='"+a.clsName+"-corner'>"+a.corner.tpl+"</div>").css(a.corner.css).appendTo(this.$tip):void 0,this.$tip.css({"margin-top":e.top+a.offset.y,"margin-left":e.left+a.offset.x,position:"absolute"}),this.renderTemplate(b,d),this.$tip}});return k},{requires:["gallery/template/1.0/index",
"./assets/tip.css"]});
